# Fixture 调整说明

## 核心概念

现在有两种类型的 fixtures（期权合约）：**部分合约（partial）** 和 **完整合约（full）**。

### 1. 部分合约（Partial Fixture）
- **没有固定的执行价格**，执行价格始终是标的资产的当前中间价
- 这是用户**可以下注**的合约类型
- 在主界面上显示，带有"涨/跌"（Up/Down）按钮
- **不包含**持仓量（open interest）、价内/价外（ITM）等信息
- 价格（赔率）的计算假设：执行价格等于标的价格

### 2. 完整合约（Full Fixture）
- 这是用户**已经下注**的合约
- **执行价格已固定**
- 在界面上用于显示用户的持仓头寸

## 数据传输优化

### 标的资产价格传输
- 当前标的价格**不再**在每个开放的合约中重复传输
- 只在消息顶部**传输一次**
- 标的价格仅在**已关闭的合约**中包含（作为到期时的最终标的价格）

### /fixtures 端点示例
```
{
  "underlying_price": 50000.00,  // 标的价格只在顶部传输一次
  "fixtures": [
    // 部分合约和完整合约列表
  ]
}
```

## /history 端点调整

历史数据端点包含：
- **标的资产**的开盘价（open）、最高价（high）、最低价（low）、收盘价（close）
- **不包含**合约价格历史数据

### 图表绘制选项
1. **简单线图**：只使用收盘价绘制
2. **K线图**：使用全部OHLC信息绘制

## 重要说明
- 不会有任何合约的历史价格数据
- 之前遗留设计的残余部分是造成混淆的根源，现已清理

## 总结

这次调整的核心是：
1. **明确区分**可交易合约（partial）和已交易合约（full）
2. **优化数据传输**，避免重复传输标的价格
3. **简化历史数据**，只提供标的资产价格，不提供合约价格历史