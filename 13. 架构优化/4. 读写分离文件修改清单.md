# è¯»å†™åˆ†ç¦»å®æ–½ - æ–‡ä»¶ä¿®æ”¹æ¸…å•

## ä¸€ã€æ–‡ä»¶æ ‘å½¢ç»“æ„ï¼ˆåŸºäºå®é™…é¡¹ç›®ç»“æ„ï¼‰

```
BinaryOption/
â”œâ”€â”€ option-common-utils/
â”‚   â””â”€â”€ src/main/java/com/binaryoption/commonutils/
â”‚       â”œâ”€â”€ datasource/                                     ã€æ–°å¢ç›®å½•ã€‘
â”‚       â”‚   â”œâ”€â”€ DynamicDataSource.java                    ã€æ–°å¢ã€‘åŠ¨æ€æ•°æ®æºè·¯ç”±
â”‚       â”‚   â””â”€â”€ ReadWriteDataSourceAspect.java             ã€æ–°å¢ã€‘è¯»å†™åˆ†ç¦»AOPåˆ‡é¢
â”‚       â””â”€â”€ config/
â”‚           â””â”€â”€ DataSourceConfig.java                      ã€æ–°å¢ã€‘æ•°æ®æºé…ç½®ç±»
â”‚
â”œâ”€â”€ option-common-service/
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â””â”€â”€ application.yml                                ã€ä¿®æ”¹ã€‘æ·»åŠ ä¸»ä»æ•°æ®æºé…ç½®
â”‚   â””â”€â”€ src/main/java/com/binaryoption/commonservice/service/
â”‚       â”œâ”€â”€ AccountService.java                            ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ UserService.java                               ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ BtseTransferService.java                       ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ GlobalConfigService.java                       ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â””â”€â”€ ReconciliationService.java                     ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚
â”œâ”€â”€ option-order-service/
â”‚   â”œâ”€â”€ src/main/resources/
â”‚   â”‚   â””â”€â”€ application.yml                                ã€ä¿®æ”¹ã€‘æ·»åŠ ä¸»ä»æ•°æ®æºé…ç½®
â”‚   â””â”€â”€ src/main/java/com/binaryoption/orderservice/service/
â”‚       â”œâ”€â”€ OrderService.java                              ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ SymbolService.java                             ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ TradingRoundService.java                       ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ OrderStatisticsService.java                    ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ FixtureService.java                            ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ OrderHedgeService.java                         ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ OrderSettlementService.java                    ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â”œâ”€â”€ RiskControlService.java                        ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚       â””â”€â”€ UserRiskStatsService.java                      ã€ä¿®æ”¹ã€‘æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)
â”‚
â””â”€â”€ option-market-service/
    â”œâ”€â”€ src/main/resources/
    â”‚   â””â”€â”€ application.yml                                 ã€ä¿®æ”¹ã€‘æ·»åŠ ä¸»ä»æ•°æ®æºé…ç½®
    â””â”€â”€ src/main/java/com/binaryoption/marketservice/
        â”œâ”€â”€ integration/                                    ã€å¯èƒ½éœ€è¦ä¿®æ”¹ã€‘
        â”‚   â”œâ”€â”€ BtseMarketDataClient.java                   ã€æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)ã€‘
        â”‚   â””â”€â”€ BtseWebSocketClient.java                    ã€æŸ¥è¯¢æ–¹æ³•æ·»åŠ @Transactional(readOnly=true)ã€‘
        â””â”€â”€ ï¼ˆæ³¨æ„ï¼šmarket-serviceä¼¼ä¹æ²¡æœ‰serviceåŒ…ï¼Œä¸»è¦æ˜¯integrationå’Œwsï¼‰
```

## äºŒã€è¯¦ç»†ä¿®æ”¹å†…å®¹

### 2.1 æ–°å¢æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

#### ğŸ“ `option-common-utils/src/main/java/com/binaryoption/commonutils/datasource/DynamicDataSource.java`
```
ã€æ–‡ä»¶ç±»å‹ã€‘ï¼šæ–°å¢ Java ç±»
ã€æ–‡ä»¶å¤§å°ã€‘ï¼šçº¦80è¡Œä»£ç 
ã€ä¸»è¦åŠŸèƒ½ã€‘ï¼š
- ç»§æ‰¿ AbstractRoutingDataSource
- å®ç°åŠ¨æ€æ•°æ®æºè·¯ç”±é€»è¾‘
- æä¾› useMaster() / useSlave() / clear() æ–¹æ³•
- åŸºäº ThreadLocal å­˜å‚¨å½“å‰çº¿ç¨‹çš„æ•°æ®æºç±»å‹
ã€å…³é”®æ–¹æ³•ã€‘ï¼š
- determineCurrentLookupKey() - å†³å®šä½¿ç”¨å“ªä¸ªæ•°æ®æº
- setDataSourceType() - è®¾ç½®æ•°æ®æºç±»å‹
```

#### ğŸ“ `option-common-utils/src/main/java/com/binaryoption/commonutils/datasource/ReadWriteDataSourceAspect.java`
```
ã€æ–‡ä»¶ç±»å‹ã€‘ï¼šæ–°å¢ Java ç±»
ã€æ–‡ä»¶å¤§å°ã€‘ï¼šçº¦60è¡Œä»£ç 
ã€ä¸»è¦åŠŸèƒ½ã€‘ï¼š
- AOPåˆ‡é¢ï¼Œæ‹¦æˆªæ‰€æœ‰Serviceå±‚æ–¹æ³•
- æ ¹æ® @Transactional(readOnly) æ³¨è§£åˆ¤æ–­æ•°æ®æº
- åœ¨æ–¹æ³•æ‰§è¡Œå‰è®¾ç½®æ•°æ®æºï¼Œæ‰§è¡Œåæ¸…ç†ThreadLocal
ã€å…³é”®é€»è¾‘ã€‘ï¼š
- @Transactional(readOnly=true) â†’ ä½¿ç”¨ä»åº“
- @Transactional æˆ–æ— æ³¨è§£ â†’ ä½¿ç”¨ä¸»åº“
- @Order(Ordered.HIGHEST_PRECEDENCE) ç¡®ä¿åœ¨äº‹åŠ¡åˆ‡é¢å‰æ‰§è¡Œ
```

#### ğŸ“ `option-common-utils/src/main/java/com/binaryoption/commonutils/config/DataSourceConfig.java`
```
ã€æ–‡ä»¶ç±»å‹ã€‘ï¼šæ–°å¢ Java é…ç½®ç±»
ã€æ–‡ä»¶å¤§å°ã€‘ï¼šçº¦100è¡Œä»£ç 
ã€ä¸»è¦åŠŸèƒ½ã€‘ï¼š
- é…ç½®ä¸»æ•°æ®æº masterDataSource
- é…ç½®ä»æ•°æ®æº slaveDataSource
- é…ç½®åŠ¨æ€æ•°æ®æº dynamicDataSource
- é…ç½® SqlSessionFactory å’Œ TransactionManager
ã€å…³é”®é…ç½®ã€‘ï¼š
- @ConditionalOnProperty æ§åˆ¶æ˜¯å¦å¯ç”¨è¯»å†™åˆ†ç¦»
- @Primary æ ‡è®° dynamicDataSource ä¸ºä¸»æ•°æ®æº
- æ”¯æŒ MapperScan è‡ªåŠ¨æ‰«æ
```

### 2.2 ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆ3ä¸ªï¼‰

#### ğŸ“„ `option-common-service/src/main/resources/application.yml`
```yaml
ã€ä¿®æ”¹ç±»å‹ã€‘ï¼šæ·»åŠ æ•°æ®æºé…ç½®
ã€ä¿®æ”¹ä½ç½®ã€‘ï¼šspring.datasource èŠ‚ç‚¹ä¸‹
ã€æ·»åŠ å†…å®¹ã€‘ï¼š
spring:
  datasource:
    master:                                    # ä¸»åº“é…ç½®
      jdbc-url: jdbc:postgresql://localhost:5433/binary_option
      username: postgres
      password: root
      driver-class-name: org.postgresql.Driver
      hikari:
        pool-name: MasterHikariPool
        minimum-idle: 10
        maximum-pool-size: 30
    slave:                                     # ä»åº“é…ç½®
      jdbc-url: jdbc:postgresql://localhost:5434/binary_option_slave
      username: postgres  
      password: root
      driver-class-name: org.postgresql.Driver
      hikari:
        pool-name: SlaveHikariPool
        minimum-idle: 5
        maximum-pool-size: 20

datasource:
  read-write-separation:
    enabled: true                              # å¯ç”¨è¯»å†™åˆ†ç¦»
    fallback-to-master: true                   # ä»åº“æ•…éšœæ—¶å›é€€åˆ°ä¸»åº“
```

#### ğŸ“„ `option-order-service/src/main/resources/application.yml`
```yaml
ã€ä¿®æ”¹å†…å®¹ã€‘ï¼šä¸ common-service ç›¸åŒçš„æ•°æ®æºé…ç½®
ã€æ³¨æ„ã€‘ï¼šç«¯å£å’Œæ•°æ®åº“åæ ¹æ®å®é™…æƒ…å†µè°ƒæ•´
```

#### ğŸ“„ `option-market-service/src/main/resources/application.yml`
```yaml
ã€ä¿®æ”¹å†…å®¹ã€‘ï¼šä¸ common-service ç›¸åŒçš„æ•°æ®æºé…ç½®
ã€æ³¨æ„ã€‘ï¼šå¦‚æœ market-service æ˜¯åªè¯»æœåŠ¡ï¼Œå¯ä»¥é…ç½®ä¸ºåªè¿æ¥ä»åº“
```

### 2.3 ä¿®æ”¹Serviceæ–‡ä»¶ï¼ˆ9ä¸ªï¼‰

#### ğŸ“„ `option-common-service/.../AccountService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getAccount(Long userId, String accountType)          â†’ @Transactional(readOnly = true)
- getAccountBalance(Long userId, String accountType)   â†’ @Transactional(readOnly = true)
- getAccountStatistics(Long userId)                    â†’ @Transactional(readOnly = true)
- checkBalance(Long userId, BigDecimal amount)         â†’ @Transactional(readOnly = true)
- getAccountTransactions(Long userId, ...)             â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- addBalance() / subtractBalance() / freezeBalance()    â†’ ä¿æŒ @Transactional
- recordBalanceChangeTransaction()                      â†’ ä¿æŒ @Transactional
- updateOrderSettlementStats()                         â†’ ä¿æŒ @Transactional

ã€ä¿®æ”¹ç¤ºä¾‹ã€‘ï¼š
// åŸä»£ç 
public AccountDTO getAccount(Long userId, String accountType) {
    Account account = accountMapper.selectByUserIdAndType(userId, accountType);
    return AccountConverter.toDTO(account);
}

// ä¿®æ”¹å
@Transactional(readOnly = true)
public AccountDTO getAccount(Long userId, String accountType) {
    Account account = accountMapper.selectByUserIdAndType(userId, accountType);
    return AccountConverter.toDTO(account);
}
```

#### ğŸ“„ `option-common-service/.../UserService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getUserById(Long userId)                             â†’ @Transactional(readOnly = true)
- getUserByExternalId(String externalId)               â†’ @Transactional(readOnly = true)
- getUserInfo(Long userId)                             â†’ @Transactional(readOnly = true)
- validateUser(Long userId)                            â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- createUser() / updateUser() / deleteUser()           â†’ ä¿æŒ @Transactional
- resolveOAuthUser()                                   â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š5-8ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-common-service/.../BtseTransferService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getTransferStatus(String transferId)                 â†’ @Transactional(readOnly = true)
- getTransferHistory(Long userId, ...)                 â†’ @Transactional(readOnly = true)
- checkTransferRecord(String clientTransferId)         â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- transferToBtse() / transferFromBtse()                â†’ ä¿æŒ @Transactional
- recordTransfer() / updateTransferStatus()            â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š3-5ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-order-service/.../OrderService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getOrder(Long orderId)                               â†’ @Transactional(readOnly = true)
- getOrdersByUserId(Long userId)                       â†’ @Transactional(readOnly = true)
- getOrdersByRound(Long roundId)                       â†’ @Transactional(readOnly = true)
- queryOrders(OrderQueryDTO query)                     â†’ @Transactional(readOnly = true)
- getActiveOrders(Long userId)                         â†’ @Transactional(readOnly = true)
- getHistoryOrders(Long userId, PageDTO page)          â†’ @Transactional(readOnly = true)
- getOrderStatistics(Long userId)                      â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- createOrder() / updateOrderStatus() / cancelOrder()  â†’ ä¿æŒ @Transactional
- settleOrders() / processOrderSettlement()            â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š8-12ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-order-service/.../SymbolService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getActiveSymbols()                                   â†’ @Transactional(readOnly = true)
- getSymbolById(Long symbolId)                         â†’ @Transactional(readOnly = true)
- getSymbolByName(String symbol)                       â†’ @Transactional(readOnly = true)
- getAllSymbols()                                      â†’ @Transactional(readOnly = true)
- getBtseSymbolById(Long symbolId)                     â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- updateSymbolConfig() / enableSymbol()                â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š5-6ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-order-service/.../TradingRoundService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šåœ¨æŸ¥è¯¢æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getCurrentRound(Long symbolId)                       â†’ @Transactional(readOnly = true)
- getRoundById(Long roundId)                           â†’ @Transactional(readOnly = true)
- getRoundHistory(Long symbolId, Integer limit)        â†’ @Transactional(readOnly = true)
- getRoundStatistics(Long roundId)                     â†’ @Transactional(readOnly = true)
- getOrCreateRoundForDuration(...)                     â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- createRound() / updateRoundStatus()                  â†’ ä¿æŒ @Transactional
- lockRound() / settleRound()                          â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š4-6ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-order-service/.../OrderStatisticsService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šæ‰€æœ‰æ–¹æ³•éƒ½æ˜¯æŸ¥è¯¢ï¼Œå…¨éƒ¨æ·»åŠ  readOnly
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- calculateUserStatistics(Long userId)                 â†’ @Transactional(readOnly = true)
- getRoundStatistics(Long roundId)                     â†’ @Transactional(readOnly = true)
- getSymbolStatistics(Long symbolId)                   â†’ @Transactional(readOnly = true)

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š3-4ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-order-service/.../FixtureService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šæŸ¥è¯¢æ–¹æ³•æ·»åŠ  readOnly
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- selectFixtureForOrder() - å¦‚æœåªæŸ¥è¯¢ä¸å†™å…¥                â†’ @Transactional(readOnly = true)

ã€ä¸éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- performOrderHedge() - æ¶‰åŠå¤–éƒ¨APIè°ƒç”¨                   â†’ ä¿æŒ @Transactional

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š1-2ä¸ªæ–¹æ³•
```

#### ğŸ“„ `option-market-service/.../MarketService.java`
```java
ã€ä¿®æ”¹æ–¹å¼ã€‘ï¼šå¤§éƒ¨åˆ†æ˜¯æŸ¥è¯¢ï¼Œå‡ ä¹éƒ½è¦åŠ  readOnly
ã€éœ€è¦ä¿®æ”¹çš„æ–¹æ³•ã€‘ï¼š
- getMarketData(String symbol)                         â†’ @Transactional(readOnly = true)
- getKlineData(String symbol, String interval)         â†’ @Transactional(readOnly = true)
- getMarketStatistics()                                â†’ @Transactional(readOnly = true)

ã€é¢„è®¡ä¿®æ”¹ã€‘ï¼š3-5ä¸ªæ–¹æ³•
```

## ä¸‰ã€ä¿®æ”¹å·¥ä½œé‡ä¼°ç®—

### 3.1 æŒ‰æ–‡ä»¶ç±»å‹åˆ†ç±»

| æ–‡ä»¶ç±»å‹ | æ•°é‡ | é¢„è®¡å·¥ä½œé‡ | éš¾åº¦ |
|---------|------|-----------|------|
| **æ–°å¢Javaç±»** | 3ä¸ª | 2å°æ—¶ | ä¸­ç­‰ |
| **ä¿®æ”¹é…ç½®æ–‡ä»¶** | 3ä¸ª | 30åˆ†é’Ÿ | ç®€å• |
| **ä¿®æ”¹Serviceç±»** | 9ä¸ª | 3å°æ—¶ | ç®€å• |
| **æµ‹è¯•éªŒè¯** | - | 2å°æ—¶ | ç®€å• |
| **æ€»è®¡** | 15ä¸ªæ–‡ä»¶ | **7.5å°æ—¶** | **ä¸­ç­‰** |

### 3.2 æŒ‰æœåŠ¡åˆ†ç±»

| æœåŠ¡ | ä¿®æ”¹æ–‡ä»¶æ•° | æ–¹æ³•æ•°é‡ | å·¥ä½œé‡ |
|------|-----------|---------|--------|
| **option-common-utils** | 3ä¸ªæ–°å¢ | - | 2å°æ—¶ |
| **option-common-service** | 4ä¸ªä¿®æ”¹ | 15-20ä¸ªæ–¹æ³• | 1.5å°æ—¶ |
| **option-order-service** | 6ä¸ªä¿®æ”¹ | 25-35ä¸ªæ–¹æ³• | 2.5å°æ—¶ |
| **option-market-service** | 2ä¸ªä¿®æ”¹ | 5-8ä¸ªæ–¹æ³• | 0.5å°æ—¶ |
| **é›†æˆæµ‹è¯•** | - | - | 1å°æ—¶ |

### 3.3 å…³é”®æ³¨æ„äº‹é¡¹

#### âš ï¸ **å®¹æ˜“å‡ºé”™çš„åœ°æ–¹**
1. **é…ç½®æ–‡ä»¶**ï¼šæ•°æ®åº“è¿æ¥ä¿¡æ¯è¦ç¡®è®¤æ­£ç¡®
2. **åŒ…åå¯¼å…¥**ï¼šæ–°å¢çš„ç±»è¦ç¡®ä¿ import è·¯å¾„æ­£ç¡®
3. **æ³¨è§£ä½ç½®**ï¼š`@Transactional(readOnly = true)` è¦åŠ åœ¨æ­£ç¡®çš„æ–¹æ³•ä¸Š
4. **æ··åˆæ“ä½œ**ï¼šåŒ…å«æŸ¥è¯¢+å†™å…¥çš„æ–¹æ³•ä¸èƒ½åŠ  `readOnly = true`

#### âœ… **éªŒè¯è¦ç‚¹**
1. **å¯åŠ¨éªŒè¯**ï¼šæ‰€æœ‰æœåŠ¡èƒ½æ­£å¸¸å¯åŠ¨
2. **æ—¥å¿—éªŒè¯**ï¼šçœ‹åˆ° "uses SLAVE datasource" å’Œ "uses MASTER datasource" æ—¥å¿—
3. **åŠŸèƒ½éªŒè¯**ï¼šæ ¸å¿ƒä¸šåŠ¡æµç¨‹æ­£å¸¸å·¥ä½œ
4. **æ€§èƒ½éªŒè¯**ï¼šæŸ¥è¯¢æ€§èƒ½æœ‰æ‰€æå‡

#### ğŸ”„ **å›æ»šæ–¹æ¡ˆ**
1. **å¿«é€Ÿå›æ»š**ï¼šé…ç½®æ–‡ä»¶ä¸­è®¾ç½® `enabled: false`
2. **å®Œå…¨å›æ»š**ï¼šåˆ é™¤æ–°å¢æ–‡ä»¶ï¼Œæ¢å¤Serviceæ–¹æ³•æ³¨è§£

è¿™ä¸ªæ¸…å•ç¡®ä¿äº†å®æ–½è¿‡ç¨‹çš„å¯æ§æ€§å’Œå¯è¿½è¸ªæ€§ï¼