# åç«¯é¡¹ç›®ç»“æ„è®¾è®¡

## 1. é¡¹ç›®æ€»è§ˆ

äºŒå…ƒæœŸæƒäº¤æ˜“å¹³å°é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŸºäºSpring Bootå’ŒSpring Cloudæ„å»ºï¼Œæ”¯æŒMySQLå’ŒPostgreSQLåŒæ•°æ®åº“ï¼Œé›†æˆBTSE APIè¿›è¡Œèµ„é‡‘ç®¡ç†ã€‚

### 1.1 æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Spring Boot 2.7.x, Spring Cloud 2021.x
- **æ•°æ®åº“**: MySQL 8.0+ / PostgreSQL 13+
- **ORM**: MyBatis 3.5+
- **æ¶ˆæ¯é˜Ÿåˆ—**: RocketMQ 4.9+
- **ç¼“å­˜**: Redis 6.0+
- **ä»»åŠ¡è°ƒåº¦**: XXL-JOB
- **APIç½‘å…³**: Spring Cloud Gateway
- **æœåŠ¡æ³¨å†Œ**: Nacos
- **ç›‘æ§**: Spring Boot Actuator
- **æ–‡æ¡£**: Swagger/OpenAPI 3

### 1.2 æ¶æ„ç‰¹ç‚¹
- å¾®æœåŠ¡æ¶æ„ï¼ŒèŒè´£åˆ†ç¦»ï¼Œç‹¬ç«‹éƒ¨ç½²
- åŒæ•°æ®åº“æ”¯æŒ(MySQL/PostgreSQL)
- BTSE APIé›†æˆï¼Œæ”¯æŒMockæ¨¡å¼
- å®Œæ•´çš„æµ‹è¯•ä½“ç³»
- å›½é™…åŒ–æ”¯æŒ(ä¸­è‹±æ—¥éŸ©)

## 2. é¡¹ç›®æ ¹ç›®å½•ç»“æ„
```
BinaryOption/
â”œâ”€â”€ docs/                           # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ FE/                            # å‰ç«¯é¡¹ç›®
â”œâ”€â”€ logs/                          # è¿è¡Œæ—¥å¿—
â”œâ”€â”€ sql/                           # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ test-scripts/                  # è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
â”œâ”€â”€ option-parent/                 # Mavençˆ¶é¡¹ç›®
â”œâ”€â”€ option-gateway/                # APIç½‘å…³æœåŠ¡
â”œâ”€â”€ option-common-service/         # å…¬å…±æœåŠ¡ï¼ˆè´¦æˆ·ã€BTSEï¼‰
â”œâ”€â”€ option-order-service/          # è®¢å•æœåŠ¡
â”œâ”€â”€ option-market-service/         # è¡Œæƒ…æœåŠ¡
â”œâ”€â”€ option-admin-service/          # ç®¡ç†åå°æœåŠ¡
â”œâ”€â”€ option-job-executor/           # å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨
â”œâ”€â”€ option-common-dto/             # å…¬å…±DTO
â”œâ”€â”€ option-common-utils/           # å…¬å…±å·¥å…·ç±»
â”œâ”€â”€ option-security-base/          # å®‰å…¨åŸºç¡€ç»„ä»¶
â”œâ”€â”€ option-xxl-job/                # XXL-JOBä»»åŠ¡è°ƒåº¦
â”œâ”€â”€ package-all.sh                 # æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ start-all.sh                   # å¯åŠ¨è„šæœ¬
â”œâ”€â”€ stop-all.sh                    # åœæ­¢è„šæœ¬
â””â”€â”€ CLAUDE.md                      # é¡¹ç›®è®°å¿†æ–‡æ¡£
```

## 3. å¾®æœåŠ¡æ¨¡å—è®¾è®¡

### 3.1 option-gateway (APIç½‘å…³)
**ç«¯å£**: 8080  
**ä½œç”¨**: ç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±è½¬å‘ï¼Œè®¤è¯é‰´æƒ

```
option-gateway/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/
    â”œâ”€â”€ java/com/binaryoption/gateway/
    â”‚   â””â”€â”€ GatewayApplication.java      # å¯åŠ¨ç±»
    â””â”€â”€ resources/
        â”œâ”€â”€ application.yml              # ä¸»é…ç½®
        â””â”€â”€ bootstrap.yml               # å¼•å¯¼é…ç½®
```

### 3.2 option-common-service (å…¬å…±æœåŠ¡)
**ç«¯å£**: 8081  
**æ ¸å¿ƒåŠŸèƒ½**: è´¦æˆ·ç®¡ç†ã€BTSEé›†æˆã€ç”¨æˆ·ç®¡ç†

```
option-common-service/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/
    â”œâ”€â”€ java/com/binaryoption/commonservice/
    â”‚   â”œâ”€â”€ Application.java
    â”‚   â”œâ”€â”€ config/                      # é…ç½®ç±»
    â”‚   â”‚   â”œâ”€â”€ AsyncTransferConfig.java
    â”‚   â”‚   â”œâ”€â”€ BtseIntegrationConfig.java
    â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
    â”‚   â”‚   â””â”€â”€ SwaggerConfig.java
    â”‚   â”œâ”€â”€ controller/                  # RESTæ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ AccountController.java
    â”‚   â”‚   â”œâ”€â”€ BtseAuthController.java
    â”‚   â”‚   â”œâ”€â”€ BtseMonitoringController.java
    â”‚   â”‚   â”œâ”€â”€ UserController.java
    â”‚   â”‚   â””â”€â”€ UserTransferConfigController.java
    â”‚   â”œâ”€â”€ rpc/                        # RPCæ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ AccountRpcController.java
    â”‚   â”‚   â”œâ”€â”€ BtseTransferRpcController.java
    â”‚   â”‚   â””â”€â”€ UserRpcController.java
    â”‚   â”œâ”€â”€ service/                    # ä¸šåŠ¡æœåŠ¡
    â”‚   â”‚   â”œâ”€â”€ AccountService.java
    â”‚   â”‚   â”œâ”€â”€ BtseTransferService.java
    â”‚   â”‚   â”œâ”€â”€ BtseUserAuthService.java
    â”‚   â”‚   â”œâ”€â”€ UserService.java
    â”‚   â”‚   â””â”€â”€ UserTransferConfigService.java
    â”‚   â”œâ”€â”€ integration/               # å¤–éƒ¨ç³»ç»Ÿé›†æˆ
    â”‚   â”‚   â”œâ”€â”€ BtseApiClient.java
    â”‚   â”‚   â”œâ”€â”€ BtseApiClientImpl.java
    â”‚   â”‚   â”œâ”€â”€ BtseMockApiClient.java
    â”‚   â”‚   â””â”€â”€ BtseDataConverter.java
    â”‚   â”œâ”€â”€ domain/                    # æ•°æ®æ¨¡å‹
    â”‚   â”‚   â”œâ”€â”€ Account.java
    â”‚   â”‚   â”œâ”€â”€ AccountTransaction.java
    â”‚   â”‚   â”œâ”€â”€ BtseTransferLog.java
    â”‚   â”‚   â”œâ”€â”€ GlobalConfig.java
    â”‚   â”‚   â””â”€â”€ User.java
    â”‚   â””â”€â”€ mapper/                    # MyBatisæ˜ å°„å™¨
    â”‚       â”œâ”€â”€ AccountMapper.java
    â”‚       â”œâ”€â”€ AccountTransactionMapper.java
    â”‚       â”œâ”€â”€ BtseTransferLogMapper.java
    â”‚       â”œâ”€â”€ GlobalConfigMapper.java
    â”‚       â””â”€â”€ UserMapper.java
    â””â”€â”€ resources/
        â”œâ”€â”€ application.yml             # ä¸»é…ç½®(MySQL)
        â”œâ”€â”€ application-postgresql.yml  # PostgreSQLé…ç½®
        â”œâ”€â”€ application-btse-transfer.yml
        â”œâ”€â”€ bootstrap.yml
        â”œâ”€â”€ btse-field-mapping.yml
        â”œâ”€â”€ i18n/                      # å›½é™…åŒ–
        â”‚   â”œâ”€â”€ messages.properties
        â”‚   â”œâ”€â”€ messages_en.properties
        â”‚   â”œâ”€â”€ messages_ja.properties
        â”‚   â””â”€â”€ messages_zh_CN.properties
        â””â”€â”€ mapper/                    # MyBatis XMLæ˜ å°„
            â”œâ”€â”€ AccountMapper.xml
            â”œâ”€â”€ AccountTransactionMapper.xml
            â”œâ”€â”€ BtseTransferLogMapper.xml
            â”œâ”€â”€ GlobalConfigMapper.xml
            â”œâ”€â”€ SymbolConfigMapper.xml
            â””â”€â”€ UserMapper.xml
```

### 3.3 option-order-service (è®¢å•æœåŠ¡)
**ç«¯å£**: 8082  
**æ ¸å¿ƒåŠŸèƒ½**: è®¢å•ç®¡ç†ã€é£æ§ã€äº¤æ˜“è½®æ¬¡ã€ç»“ç®—

```
option-order-service/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/
    â”œâ”€â”€ java/com/binaryoption/orderservice/
    â”‚   â”œâ”€â”€ Application.java
    â”‚   â”œâ”€â”€ config/                    # é…ç½®ç±»
    â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
    â”‚   â”‚   â””â”€â”€ SwaggerConfig.java
    â”‚   â”œâ”€â”€ controller/                # RESTæ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ OrderController.java
    â”‚   â”‚   â”œâ”€â”€ RiskController.java
    â”‚   â”‚   â””â”€â”€ TradingController.java
    â”‚   â”œâ”€â”€ rpc/                      # RPCæ§åˆ¶å™¨
    â”‚   â”‚   â”œâ”€â”€ OrderRpcController.java
    â”‚   â”‚   â”œâ”€â”€ RiskRpcController.java
    â”‚   â”‚   â””â”€â”€ TradingRpcController.java
    â”‚   â”œâ”€â”€ service/                  # ä¸šåŠ¡æœåŠ¡
    â”‚   â”‚   â”œâ”€â”€ OrderService.java
    â”‚   â”‚   â”œâ”€â”€ RiskService.java
    â”‚   â”‚   â”œâ”€â”€ SettlementService.java
    â”‚   â”‚   â””â”€â”€ TradingRoundService.java
    â”‚   â”œâ”€â”€ domain/                   # æ•°æ®æ¨¡å‹
    â”‚   â”‚   â”œâ”€â”€ Order.java
    â”‚   â”‚   â”œâ”€â”€ TradingRound.java
    â”‚   â”‚   â”œâ”€â”€ RiskConfig.java
    â”‚   â”‚   â”œâ”€â”€ RiskLog.java
    â”‚   â”‚   â””â”€â”€ DurationConfig.java
    â”‚   â”œâ”€â”€ mapper/                   # MyBatisæ˜ å°„å™¨
    â”‚   â”‚   â”œâ”€â”€ OrderMapper.java
    â”‚   â”‚   â”œâ”€â”€ TradingRoundMapper.java
    â”‚   â”‚   â”œâ”€â”€ RiskConfigMapper.java
    â”‚   â”‚   â”œâ”€â”€ RiskLogMapper.java
    â”‚   â”‚   â””â”€â”€ DurationConfigMapper.java
    â”‚   â””â”€â”€ client/                   # å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯
    â”‚       â”œâ”€â”€ CommonServiceClient.java
    â”‚       â”œâ”€â”€ MarketServiceClient.java
    â”‚       â””â”€â”€ BtseTransferRpcClient.java
    â””â”€â”€ resources/
        â”œâ”€â”€ application.yml           # ä¸»é…ç½®(MySQL)
        â”œâ”€â”€ application-postgresql.yml # PostgreSQLé…ç½®
        â”œâ”€â”€ bootstrap.yml
        â”œâ”€â”€ i18n/                    # å›½é™…åŒ–
        â””â”€â”€ mapper/                  # MyBatis XMLæ˜ å°„
            â”œâ”€â”€ OrderMapper.xml
            â”œâ”€â”€ TradingRoundMapper.xml
            â”œâ”€â”€ RiskConfigMapper.xml
            â”œâ”€â”€ RiskLogMapper.xml
            â””â”€â”€ DurationConfigMapper.xml
```

### 3.4 option-market-service (è¡Œæƒ…æœåŠ¡)
**ç«¯å£**: 8083  
**æ ¸å¿ƒåŠŸèƒ½**: è¡Œæƒ…æ•°æ®ã€ä»·æ ¼æºç®¡ç†ã€WebSocketæ¨é€

### 3.5 option-admin-service (ç®¡ç†åå°æœåŠ¡)
**ç«¯å£**: 8084  
**æ ¸å¿ƒåŠŸèƒ½**: åå°ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®ã€æŠ¥è¡¨ç»Ÿè®¡

### 3.6 option-job-executor (å®šæ—¶ä»»åŠ¡æ‰§è¡Œå™¨)
**ç«¯å£**: 8085  
**æ ¸å¿ƒåŠŸèƒ½**: å®šæ—¶ä»»åŠ¡æ‰§è¡Œã€ç»“ç®—ä»»åŠ¡ã€è¡¥å¿ä»»åŠ¡

## 4. å…¬å…±æ¨¡å—è®¾è®¡

### 4.1 option-common-dto (å…¬å…±DTO)
```
option-common-dto/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/java/com/binaryoption/commondto/
    â”œâ”€â”€ account/              # è´¦æˆ·ç›¸å…³DTO
    â”œâ”€â”€ admin/               # ç®¡ç†ç›¸å…³DTO
    â”œâ”€â”€ btse/                # BTSEç›¸å…³DTO
    â”œâ”€â”€ common/              # é€šç”¨DTO
    â”œâ”€â”€ config/              # é…ç½®ç›¸å…³DTO
    â”œâ”€â”€ order/               # è®¢å•ç›¸å…³DTO
    â”œâ”€â”€ risk/                # é£æ§ç›¸å…³DTO
    â”œâ”€â”€ stats/               # ç»Ÿè®¡ç›¸å…³DTO
    â”œâ”€â”€ symbol/              # äº¤æ˜“å“ç§ç›¸å…³DTO
    â”œâ”€â”€ trading/             # äº¤æ˜“ç›¸å…³DTO
    â””â”€â”€ user/                # ç”¨æˆ·ç›¸å…³DTO
```

### 4.2 option-common-utils (å…¬å…±å·¥å…·ç±»)
```
option-common-utils/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/java/com/binaryoption/commonutils/
    â”œâ”€â”€ exception/           # å¼‚å¸¸å¤„ç†
    â”œâ”€â”€ validator/           # å‚æ•°æ ¡éªŒ
    â”œâ”€â”€ btse/               # BTSEå·¥å…·ç±»
    â”œâ”€â”€ security/           # å®‰å…¨å·¥å…·ç±»
    â””â”€â”€ util/               # é€šç”¨å·¥å…·ç±»
```

### 4.3 option-security-base (å®‰å…¨åŸºç¡€ç»„ä»¶)
```
option-security-base/
â”œâ”€â”€ pom.xml
â””â”€â”€ src/main/java/com/binaryoption/securitybase/
    â”œâ”€â”€ AuthUserUtil.java
    â”œâ”€â”€ CustomUserDetails.java
    â”œâ”€â”€ JwtAuthenticationFilter.java
    â””â”€â”€ filter/
```

## 5. ä»£ç è§„èŒƒä¸çº¦å®š

### 5.1 åŒ…ç»“æ„è§„èŒƒ
```
com.binaryoption.{servicename}/
â”œâ”€â”€ config/                 # é…ç½®ç±»
â”œâ”€â”€ controller/             # RESTæ§åˆ¶å™¨ï¼ˆå¯¹å¤–APIï¼‰
â”œâ”€â”€ rpc/                   # RPCæ§åˆ¶å™¨ï¼ˆå†…éƒ¨æœåŠ¡è°ƒç”¨ï¼‰
â”œâ”€â”€ service/               # ä¸šåŠ¡æœåŠ¡å±‚
â”œâ”€â”€ domain/                # æ•°æ®æ¨¡å‹ï¼ˆå®ä½“ç±»ï¼‰
â”œâ”€â”€ mapper/                # MyBatisæ˜ å°„å™¨æ¥å£
â”œâ”€â”€ client/                # å¤–éƒ¨æœåŠ¡å®¢æˆ·ç«¯
â”œâ”€â”€ integration/           # ç¬¬ä¸‰æ–¹ç³»ç»Ÿé›†æˆ
â”œâ”€â”€ exception/             # å¼‚å¸¸å¤„ç†
â””â”€â”€ util/                  # å·¥å…·ç±»
```

### 5.2 å‘½åè§„èŒƒ

#### 5.2.1 ç±»å‘½å
- **Controller**: `XxxController` (REST API) æˆ– `XxxRpcController` (RPC)
- **Service**: `XxxService`
- **Domain**: å®ä½“åï¼Œå¦‚ `User`, `Order`, `Account`
- **DTO**: `XxxDTO`, `XxxRequestDTO`, `XxxResponseDTO`, `XxxVO`
- **Mapper**: `XxxMapper`
- **Config**: `XxxConfig`

#### 5.2.2 æ–¹æ³•å‘½å
- **æŸ¥è¯¢**: `find`, `get`, `query`, `list`
- **æ–°å¢**: `create`, `add`, `insert`
- **æ›´æ–°**: `update`, `modify`
- **åˆ é™¤**: `delete`, `remove`
- **æ ¡éªŒ**: `validate`, `check`

### 5.3 é…ç½®æ–‡ä»¶è§„èŒƒ

#### 5.3.1 å¤šç¯å¢ƒé…ç½®
```
resources/
â”œâ”€â”€ application.yml              # ä¸»é…ç½®(é»˜è®¤MySQL)
â”œâ”€â”€ application-postgresql.yml   # PostgreSQLé…ç½®
â”œâ”€â”€ application-dev.yml         # å¼€å‘ç¯å¢ƒ
â”œâ”€â”€ application-test.yml        # æµ‹è¯•ç¯å¢ƒ
â”œâ”€â”€ application-prod.yml        # ç”Ÿäº§ç¯å¢ƒ
â””â”€â”€ bootstrap.yml              # å¼•å¯¼é…ç½®(Nacosç­‰)
```

#### 5.3.2 æ•°æ®åº“æ”¯æŒ
- ä½¿ç”¨MyBatisçš„`databaseId`æœºåˆ¶æ”¯æŒMySQLå’ŒPostgreSQL
- XMLæ˜ å°„æ–‡ä»¶ä¸­åŒºåˆ†æ•°æ®åº“ç‰¹å®šSQL:
```xml
<insert id="insert" databaseId="mysql">...</insert>
<insert id="insert" databaseId="postgresql">...</insert>
```

### 5.4 å¼‚å¸¸å¤„ç†è§„èŒƒ

#### 5.4.1 å¼‚å¸¸ç±»å‹
- **BusinessException**: ä¸šåŠ¡å¼‚å¸¸
- **SystemException**: ç³»ç»Ÿå¼‚å¸¸  
- **ValidationException**: å‚æ•°æ ¡éªŒå¼‚å¸¸

#### 5.4.2 å¼‚å¸¸å¤„ç†
```java
@ControllerAdvice
public class GlobalExceptionHandler {
    
    @ExceptionHandler(BusinessException.class)
    public Result<String> handleBusinessException(BusinessException e) {
        log.error("ä¸šåŠ¡å¼‚å¸¸: {}", e.getMessage());
        return Result.error(e.getCode(), e.getMessage());
    }
    
    @ExceptionHandler(Exception.class)
    public Result<String> handleException(Exception e) {
        log.error("ç³»ç»Ÿå¼‚å¸¸: {}", e.getMessage());
        return Result.error("SYSTEM_ERROR", "ç³»ç»Ÿå¼‚å¸¸");
    }
}
```

### 5.5 æ—¥å¿—è§„èŒƒ

#### 5.5.1 æ—¥å¿—çº§åˆ«
- **ERROR**: ç³»ç»Ÿé”™è¯¯ã€ä¸šåŠ¡å¼‚å¸¸
- **WARN**: è­¦å‘Šä¿¡æ¯ã€é‡è¦ä¸šåŠ¡äº‹ä»¶
- **INFO**: å…³é”®ä¸šåŠ¡æµç¨‹ã€çŠ¶æ€å˜æ›´
- **DEBUG**: è°ƒè¯•ä¿¡æ¯

#### 5.5.2 æ—¥å¿—æ ¼å¼
```java
// ä¸šåŠ¡æ—¥å¿—
log.info("è®¢å•åˆ›å»ºæˆåŠŸï¼Œç”¨æˆ·ï¼š{}ï¼Œè®¢å•ï¼š{}ï¼Œé‡‘é¢ï¼š{}", userId, orderId, amount);

// å¼‚å¸¸æ—¥å¿—ï¼ˆç®€åŒ–ç‰ˆï¼Œé¿å…å¤§æ®µå †æ ˆï¼‰
log.error("BTSEè½¬è´¦å¤±è´¥ï¼Œç”¨æˆ·ï¼š{}ï¼Œé‡‘é¢ï¼š{}ï¼Œé”™è¯¯ï¼š{}", userId, amount, e.getMessage());

// è°ƒè¯•æ—¥å¿—
log.debug("ğŸ” å¼€å§‹å¤„ç†BTSEè½¬è´¦ï¼Œç”¨æˆ·ï¼š{}ï¼Œé‡‘é¢ï¼š{}", userId, amount);
```

### 5.6 æ•°æ®åº“è®¾è®¡è§„èŒƒ

#### 5.6.1 è¡¨å‘½å
- å°å†™å­—æ¯ï¼Œä¸‹åˆ’çº¿åˆ†éš”
- ä¸šåŠ¡æ¨¡å—å‰ç¼€: `user_`, `order_`, `btse_`, `risk_`

#### 5.6.2 å­—æ®µè§„èŒƒ
- **ä¸»é”®**: `id` (BIGINT AUTO_INCREMENT)
- **åˆ›å»ºæ—¶é—´**: `create_time` (DATETIME)
- **æ›´æ–°æ—¶é—´**: `update_time` (DATETIME, ON UPDATE CURRENT_TIMESTAMP)
- **é€»è¾‘åˆ é™¤**: `is_deleted` (TINYINT, 0:æœªåˆ é™¤ 1:å·²åˆ é™¤)
- **çŠ¶æ€å­—æ®µ**: ä½¿ç”¨VARCHARå­˜å‚¨çŠ¶æ€ç 

### 5.7 APIè®¾è®¡è§„èŒƒ

#### 5.7.1 REST API
```
GET    /api/orders          # æŸ¥è¯¢åˆ—è¡¨
GET    /api/orders/{id}     # æŸ¥è¯¢è¯¦æƒ…
POST   /api/orders          # åˆ›å»º
PUT    /api/orders/{id}     # æ›´æ–°
DELETE /api/orders/{id}     # åˆ é™¤
```

#### 5.7.2 RPC API
```
POST /rpc/order/create          # åˆ›å»ºè®¢å•
POST /rpc/order/settle          # è®¢å•ç»“ç®—
GET  /rpc/order/{id}            # æŸ¥è¯¢è®¢å•
POST /rpc/btse/transfer         # BTSEè½¬è´¦
```

#### 5.7.3 å“åº”æ ¼å¼
```json
{
    "code": 200,
    "message": "success",
    "data": {},
    "success": true,
    "error": false
}
```

## 6. éƒ¨ç½²ä¸è¿ç»´

### 6.1 éƒ¨ç½²è„šæœ¬
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start-all.sh

# åœæ­¢æ‰€æœ‰æœåŠ¡  
./stop-all.sh

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
./status.sh

# é‡æ–°æ„å»ºå¹¶é‡å¯
./rebuild-restart.sh
```

### 6.2 æœåŠ¡ç«¯å£åˆ†é…
| æœåŠ¡ | ç«¯å£ | è¯´æ˜ |
|-----|------|------|
| option-gateway | 8080 | APIç½‘å…³ |
| option-common-service | 8081 | å…¬å…±æœåŠ¡ |
| option-order-service | 8082 | è®¢å•æœåŠ¡ |
| option-market-service | 8083 | è¡Œæƒ…æœåŠ¡ |
| option-admin-service | 8084 | ç®¡ç†åå° |
| option-job-executor | 8085 | ä»»åŠ¡æ‰§è¡Œå™¨ |

### 6.3 ç›‘æ§ä¸æ—¥å¿—
- **æ—¥å¿—è·¯å¾„**: `logs/`ç›®å½•ä¸‹å„æœåŠ¡æ—¥å¿—
- **å¥åº·æ£€æŸ¥**: `/actuator/health`
- **æŒ‡æ ‡ç›‘æ§**: `/actuator/metrics`

## 7. æµ‹è¯•è§„èŒƒ

### 7.1 æµ‹è¯•è„šæœ¬ç»“æ„
```
test-scripts/
â”œâ”€â”€ modules/                # æ¨¡å—åŒ–æµ‹è¯•
â”‚   â”œâ”€â”€ auth/              # è®¤è¯æµ‹è¯•
â”‚   â”œâ”€â”€ account/           # è´¦æˆ·æµ‹è¯•  
â”‚   â”œâ”€â”€ order/             # è®¢å•æµ‹è¯•
â”‚   â”œâ”€â”€ market/            # è¡Œæƒ…æµ‹è¯•
â”‚   â””â”€â”€ rpc/               # RPCæµ‹è¯•
â”œâ”€â”€ flows/                 # æµç¨‹æµ‹è¯•
â”œâ”€â”€ integration/           # é›†æˆæµ‹è¯•
â”œâ”€â”€ utils/                 # æµ‹è¯•å·¥å…·
â””â”€â”€ simple-flow-test.sh    # ç®€å•æµç¨‹æµ‹è¯•
```

### 7.2 æµ‹è¯•æ•°æ®ç®¡ç†
- ä½¿ç”¨è„šæœ¬è‡ªåŠ¨åŒ–åˆ›å»ºæµ‹è¯•æ•°æ®
- æ”¯æŒMySQLå’ŒPostgreSQLåŒæ•°æ®åº“æµ‹è¯•
- æä¾›æ•°æ®æ¸…ç†å’Œé‡ç½®åŠŸèƒ½

## 8. BTSEé›†æˆè®¾è®¡

### 8.1 BTSEæœåŠ¡æ¶æ„
```
BtseTransferService          # ä¸»è¦ä¸šåŠ¡æœåŠ¡
â”œâ”€â”€ BtseApiClient           # APIå®¢æˆ·ç«¯æ¥å£
â”œâ”€â”€ BtseApiClientImpl       # çœŸå®APIå®ç°
â”œâ”€â”€ BtseMockApiClient       # Mockå®ç°
â””â”€â”€ BtseDataConverter       # æ•°æ®è½¬æ¢å™¨
```

### 8.2 èµ„é‡‘æµå‘è®¾è®¡
- **DEMOè´¦æˆ·**: balance â†” frozen_balanceï¼ˆæœ¬åœ°æµè½¬ï¼‰
- **REALè´¦æˆ·**: BTSE â†” frozen_balanceï¼ˆç»•è¿‡balanceå­—æ®µï¼‰

### 8.3 è®¢å•çŠ¶æ€æœº
```
PENDING â†’ ACTIVE â†’ WIN/LOSE/DRAW
   â†“         â†“
CANCELLED  CANCELLED
```

### 8.4 ç»“ç®—å·®å¼‚
- **DEMO**: èµ„é‡‘å›åˆ°balance
- **REAL**: ç›ˆåˆ©è½¬å‡ºåˆ°BTSEï¼ŒäºæŸæ‰£é™¤frozen_balance

## 9. æ€»ç»“

æœ¬é¡¹ç›®é‡‡ç”¨æ¸…æ™°çš„å¾®æœåŠ¡æ¶æ„ï¼ŒèŒè´£åˆ†ç¦»ï¼Œæ¨¡å—åŒ–è®¾è®¡ï¼š

1. **ç½‘å…³å±‚**: ç»Ÿä¸€å…¥å£ï¼Œè·¯ç”±åˆ†å‘
2. **ä¸šåŠ¡å±‚**: å„å¾®æœåŠ¡ç‹¬ç«‹éƒ¨ç½²ï¼ŒåŠŸèƒ½å†…èš
3. **æ•°æ®å±‚**: æ”¯æŒMySQL/PostgreSQLï¼Œè¯»å†™åˆ†ç¦»
4. **é›†æˆå±‚**: BTSE APIé›†æˆï¼ŒMockæ”¯æŒ
5. **ä»»åŠ¡å±‚**: XXL-JOBè°ƒåº¦ï¼Œå¼‚æ­¥å¤„ç†

ä»£ç è§„èŒƒå®Œæ•´ï¼Œæ”¯æŒå¤šç¯å¢ƒéƒ¨ç½²ï¼Œå…·å¤‡å®Œå–„çš„æµ‹è¯•ä½“ç³»å’Œç›‘æ§æœºåˆ¶ã€‚
