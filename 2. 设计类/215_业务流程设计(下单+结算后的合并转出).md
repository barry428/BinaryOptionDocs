# ä¸šåŠ¡æµç¨‹è®¾è®¡ï¼šè½®æ¬¡ç»“ç®—åçš„åˆå¹¶è½¬å‡º

## æ–¹æ¡ˆæ¦‚è¿°

### ç°çŠ¶é—®é¢˜
- **è½¬å‡ºé¢‘ç¹**ï¼šæ¯ä¸ªè®¢å•ç»“ç®—åç«‹å³è½¬å‡ºï¼Œé€ æˆå¤§é‡å°é¢è½¬å‡º
- **æ‰‹ç»­è´¹é«˜**ï¼šå¤šæ¬¡è½¬å‡ºäº§ç”Ÿæ›´å¤šæ‰‹ç»­è´¹æˆæœ¬
- **æ—¥å¿—å†—ä½™**ï¼šæ¯ä¸ªè®¢å•ä¸€æ¡è½¬å‡ºè®°å½•ï¼Œæ—¥å¿—é‡å¤§
- **æ€§èƒ½å½±å“**ï¼šç»“ç®—è¿‡ç¨‹ä¸­é¢‘ç¹è°ƒç”¨BTSEè½¬å‡ºAPI

### ä¼˜åŒ–ç›®æ ‡
- **åˆå¹¶è½¬å‡º**ï¼šæ¯ä¸ªè½®æ¬¡æ¯ä¸ªç”¨æˆ·æœ€å¤šä¸€æ¬¡è½¬å‡º
- **å‡å°‘æ‰‹ç»­è´¹**ï¼šåˆå¹¶å¤šä¸ªè®¢å•çš„æ”¶ç›Šï¼Œå‡å°‘è½¬å‡ºæ¬¡æ•°
- **æå‡æ€§èƒ½**ï¼šå‡å°‘BTSE APIè°ƒç”¨é¢‘ç‡
- **çŠ¶æ€è·Ÿè¸ª**ï¼šå®Œæ•´çš„è½¬è´¦çŠ¶æ€ç®¡ç†å’Œè¡¥å¿æœºåˆ¶

## ä¸šåŠ¡æµç¨‹è®¾è®¡

### 1. æ•´ä½“æµç¨‹
```
ç”¨æˆ·ä¸‹å• â†’ è®¢å•ç»“ç®— â†’ è½®æ¬¡ç»“ç®—å®Œæˆ â†’ åˆå¹¶æ”¶ç›Šè½¬å‡º â†’ çŠ¶æ€è·Ÿè¸ª
```

### 2. è¯¦ç»†æµç¨‹

#### é˜¶æ®µ1ï¼šä¸‹å•é˜¶æ®µï¼ˆä¿æŒä¸å˜ï¼‰
```
1. ç”¨æˆ·ä¸‹å•
2. BTSEè‡ªåŠ¨è½¬å…¥ï¼ˆREALè´¦æˆ·ï¼‰- transfer_type: ORDER_IN
3. å†»ç»“èµ„é‡‘ï¼ˆbalance â†’ frozen_balanceï¼‰
4. è®°å½•user_roundå…³è”ï¼ˆé¦–æ¬¡ä¸‹å•ï¼Œstatus: PENDINGï¼‰
```

#### é˜¶æ®µ2ï¼šè®¢å•ç»“ç®—é˜¶æ®µï¼ˆç®€åŒ–è½¬å‡ºï¼‰
```
1. è®¡ç®—è®¢å•ç›ˆäº
2. æ›´æ–°è®¢å•çŠ¶æ€ï¼ˆWIN/LOSEï¼‰
3. è´¦æˆ·èµ„é‡‘ç»“ç®—ï¼ˆfrozen_balance â†’ balanceï¼‰
4. âŒ åˆ é™¤ï¼šè®¢å•çº§è‡ªåŠ¨è½¬å‡º
```

#### é˜¶æ®µ3ï¼šè½®æ¬¡ç»“ç®—å®Œæˆï¼ˆæ–°å¢åˆå¹¶è½¬å‡ºï¼‰
```
1. æ›´æ–°è½®æ¬¡çŠ¶æ€ä¸ºSETTLED
2. ç»Ÿè®¡ç”¨æˆ·è½®æ¬¡æ•°æ®å†™å…¥user_roundï¼ˆstatus: SETTLEDï¼‰
3. ğŸ†• åˆå¹¶æ”¶ç›Šè½¬å‡ºé€»è¾‘ï¼š
   - è®¡ç®—è½¬å‡ºé‡‘é¢ï¼šæ€»æŠ•æ³¨é‡‘é¢ + å‡€æ”¶ç›Š
   - è½¬å‡ºæ¡ä»¶ï¼šæœ€ç»ˆé‡‘é¢ > 0
   - æ›´æ–°user_roundçŠ¶æ€ï¼šTRANSFERRED
   - åˆ›å»ºbtse_transfer_logè®°å½•ï¼ˆtransfer_type: ROUND_OUTï¼‰
   - è¡¥å¿æœºåˆ¶æ›´æ–°æœ€ç»ˆçŠ¶æ€ï¼šTRANSFER_SUCCESS/TRANSFER_FAILED
```

## è½¬å‡ºé€»è¾‘è®¾è®¡

### 1. è½¬å‡ºæ¡ä»¶åˆ¤æ–­
```java
// REALè´¦æˆ·ä¸”(æ€»æŠ•æ³¨é‡‘é¢ + å‡€æ”¶ç›Š) > 0 æ‰è½¬å‡º
BigDecimal finalAmount = totalAmount.add(netProfit);
if (BusinessConstants.AccountType.REAL.equals(accountType) && 
    finalAmount.compareTo(BigDecimal.ZERO) > 0) {
    executeRoundMergedTransferOut(userId, accountType, totalAmount, netProfit, roundId);
} else {
    // æ›´æ–°user_roundçŠ¶æ€ä¸ºSKIPPED
    userRoundMapper.updateTransferStatus(userId, roundId, accountType, 
        BusinessConstants.UserRoundStatus.SKIPPED);
}
```

### 2. è½¬å‡ºé‡‘é¢è®¡ç®—
```
è½¬å‡ºæ¡ä»¶ï¼šæ€»æŠ•æ³¨é‡‘é¢ + å‡€æ”¶ç›Š > 0
è½¬å‡ºé‡‘é¢ï¼šæ€»æŠ•æ³¨é‡‘é¢ + å‡€æ”¶ç›Š

- æ€»æŠ•æ³¨é‡‘é¢ï¼šç”¨æˆ·åœ¨è¯¥è½®æ¬¡çš„æ‰€æœ‰ä¸‹å•é‡‘é¢ï¼ˆtotalAmountï¼‰
- å‡€æ”¶ç›Šï¼šæ‰€æœ‰è®¢å•profitå­—æ®µçš„æ€»å’Œï¼ˆnetProfitï¼Œå¯ä¸ºè´Ÿå€¼ï¼‰
- æœ€ç»ˆé‡‘é¢ï¼štotalAmount + netProfit
- è½¬å‡ºæ¡ä»¶ï¼šæœ€ç»ˆé‡‘é¢ > 0
```

### 3. çŠ¶æ€ç®¡ç†
```
user_round.status çŠ¶æ€æµè½¬ï¼š
PENDING â†’ SETTLED â†’ TRANSFERRED â†’ TRANSFER_SUCCESS/TRANSFER_FAILED
                 â†’ SKIPPED (å¦‚æœé‡‘é¢<=0æˆ–DEMOè´¦æˆ·)
```

### 4. ç¤ºä¾‹åœºæ™¯

#### åœºæ™¯1ï¼šç”¨æˆ·ç›ˆåˆ©
```
ç”¨æˆ·åœ¨è½®æ¬¡6008æœ‰3ä¸ªè®¢å•ï¼š
- è®¢å•1ï¼šæŠ•æ³¨100ï¼Œç›ˆåˆ©80
- è®¢å•2ï¼šæŠ•æ³¨50ï¼ŒäºæŸ50  
- è®¢å•3ï¼šæŠ•æ³¨200ï¼Œç›ˆåˆ©150

è®¡ç®—ï¼š
- æ€»æŠ•æ³¨ï¼š100 + 50 + 200 = 350
- å‡€æ”¶ç›Šï¼š80 + (-50) + 150 = 180
- æœ€ç»ˆé‡‘é¢ï¼š350 + 180 = 530
- è½¬å‡ºæ¡ä»¶ï¼š530 > 0 âœ…
- è½¬å‡ºé‡‘é¢ï¼š530
- user_round.status: PENDING â†’ SETTLED â†’ TRANSFERRED â†’ TRANSFER_SUCCESS
```

#### åœºæ™¯2ï¼šç”¨æˆ·äºæŸ
```
ç”¨æˆ·åœ¨è½®æ¬¡6009æœ‰2ä¸ªè®¢å•ï¼š
- è®¢å•1ï¼šæŠ•æ³¨100ï¼ŒäºæŸ100
- è®¢å•2ï¼šæŠ•æ³¨50ï¼ŒäºæŸ50

è®¡ç®—ï¼š
- æ€»æŠ•æ³¨ï¼š100 + 50 = 150  
- å‡€æ”¶ç›Šï¼š(-100) + (-50) = -150
- æœ€ç»ˆé‡‘é¢ï¼š150 + (-150) = 0
- è½¬å‡ºæ¡ä»¶ï¼š0 > 0 âŒ
- è½¬å‡ºé‡‘é¢ï¼š0ï¼ˆä¸è½¬å‡ºï¼‰
- user_round.status: PENDING â†’ SETTLED â†’ SKIPPED
```

## æ•°æ®åº“è¡¨ç»“æ„

### 1. user_roundè¡¨ï¼ˆæ–°å¢çŠ¶æ€è·Ÿè¸ªï¼‰

#### MySQLç‰ˆæœ¬
```sql
CREATE TABLE user_round (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    user_id BIGINT NOT NULL,
    round_id BIGINT NOT NULL,
    account_type VARCHAR(10) NOT NULL,
    first_order_time TIMESTAMP NULL,
    last_settle_time TIMESTAMP NULL,
    total_orders INTEGER DEFAULT 0,
    total_amount DECIMAL(18,8) DEFAULT 0,
    net_profit DECIMAL(18,8) DEFAULT 0,
    status VARCHAR(20) DEFAULT 'PENDING',  -- ğŸ†• è½¬è´¦çŠ¶æ€è·Ÿè¸ª
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    UNIQUE KEY uk_user_round_account (user_id, round_id, account_type),
    INDEX idx_user_settle_time (user_id, last_settle_time),
    INDEX idx_user_round_status (status)
);
```

#### PostgreSQLç‰ˆæœ¬
```sql
CREATE TABLE user_round (
    id BIGSERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,
    round_id BIGINT NOT NULL,
    account_type VARCHAR(10) NOT NULL,
    first_order_time TIMESTAMP,
    last_settle_time TIMESTAMP,
    total_orders INTEGER DEFAULT 0,
    total_amount DECIMAL(18,8) DEFAULT 0,
    net_profit DECIMAL(18,8) DEFAULT 0,
    status VARCHAR(20) DEFAULT 'PENDING',  -- ğŸ†• è½¬è´¦çŠ¶æ€è·Ÿè¸ª
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    
    CONSTRAINT uk_user_round_account UNIQUE (user_id, round_id, account_type)
);

CREATE INDEX IF NOT EXISTS idx_user_settle_time ON user_round(user_id, last_settle_time);
CREATE INDEX IF NOT EXISTS idx_user_round_status ON user_round(status);

COMMENT ON COLUMN user_round.status IS 'çŠ¶æ€ï¼šPENDING-å¾…ç»“ç®—ï¼ŒSETTLED-å·²ç»“ç®—ï¼ŒTRANSFERRED-è½¬è´¦ä¸­ï¼ŒTRANSFER_SUCCESS-è½¬è´¦æˆåŠŸï¼ŒTRANSFER_FAILED-è½¬è´¦å¤±è´¥ï¼ŒSKIPPED-è·³è¿‡';
```

### 2. btse_transfer_logè¡¨ï¼ˆæ–°å»ºå®Œæ•´è¡¨ç»“æ„ï¼‰

#### MySQLç‰ˆæœ¬
```sql
CREATE TABLE btse_transfer_log (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    trace_id VARCHAR(100) NOT NULL,
    user_id BIGINT NOT NULL,
    transfer_type VARCHAR(20) NOT NULL,  -- ğŸ†• è½¬è´¦ç±»å‹
    refer_id BIGINT,                     -- ğŸ†• å…³è”IDï¼ˆè®¢å•IDæˆ–è½®æ¬¡IDï¼‰
    direction VARCHAR(10) NOT NULL,      -- IN/OUT
    amount DECIMAL(18,8) NOT NULL,
    currency VARCHAR(10) DEFAULT 'USDT',
    transfer_id VARCHAR(100),            -- BTSEè½¬è´¦ID
    api_method VARCHAR(50),
    status VARCHAR(20) DEFAULT 'PENDING',
    error_message TEXT,
    request_data TEXT,
    response_data TEXT,
    retry_count INTEGER DEFAULT 0,
    environment VARCHAR(20),
    is_mock BOOLEAN DEFAULT FALSE,
    request_time TIMESTAMP NULL,
    response_time TIMESTAMP NULL,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    
    INDEX idx_user_id (user_id),
    INDEX idx_trace_id (trace_id),
    INDEX idx_transfer_id (transfer_id),
    INDEX idx_status (status),
    INDEX idx_refer_type (refer_id, transfer_type),
    INDEX idx_direction_status (direction, status)
);
```

#### PostgreSQLç‰ˆæœ¬
```sql
CREATE TABLE btse_transfer_log (
    id BIGSERIAL PRIMARY KEY,
    trace_id VARCHAR(100) NOT NULL,
    user_id BIGINT NOT NULL,
    transfer_type VARCHAR(20) NOT NULL,  -- ğŸ†• è½¬è´¦ç±»å‹
    refer_id BIGINT,                     -- ğŸ†• å…³è”IDï¼ˆè®¢å•IDæˆ–è½®æ¬¡IDï¼‰
    direction VARCHAR(10) NOT NULL,      -- IN/OUT
    amount DECIMAL(18,8) NOT NULL,
    currency VARCHAR(10) DEFAULT 'USDT',
    transfer_id VARCHAR(100),            -- BTSEè½¬è´¦ID
    api_method VARCHAR(50),
    status VARCHAR(20) DEFAULT 'PENDING',
    error_message TEXT,
    request_data TEXT,
    response_data TEXT,
    retry_count INTEGER DEFAULT 0,
    environment VARCHAR(20),
    is_mock BOOLEAN DEFAULT FALSE,
    request_time TIMESTAMP,
    response_time TIMESTAMP,
    create_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    update_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX IF NOT EXISTS idx_user_id ON btse_transfer_log(user_id);
CREATE INDEX IF NOT EXISTS idx_trace_id ON btse_transfer_log(trace_id);
CREATE INDEX IF NOT EXISTS idx_transfer_id ON btse_transfer_log(transfer_id);
CREATE INDEX IF NOT EXISTS idx_status ON btse_transfer_log(status);
CREATE INDEX IF NOT EXISTS idx_refer_type ON btse_transfer_log(refer_id, transfer_type);
CREATE INDEX IF NOT EXISTS idx_direction_status ON btse_transfer_log(direction, status);
```

#### çŠ¶æ€è¯´æ˜
```
user_round.status çŠ¶æ€ï¼š
- PENDING: å¾…ç»“ç®—
- SETTLED: å·²ç»“ç®—ï¼Œç­‰å¾…è½¬è´¦
- TRANSFERRED: è½¬è´¦ä¸­
- TRANSFER_SUCCESS: è½¬è´¦æˆåŠŸ
- TRANSFER_FAILED: è½¬è´¦å¤±è´¥
- SKIPPED: è·³è¿‡è½¬è´¦ï¼ˆé‡‘é¢<=0æˆ–DEMOè´¦æˆ·ï¼‰

btse_transfer_log.transfer_type ç±»å‹ï¼š
- ORDER_IN: è®¢å•è½¬å…¥
- ORDER_OUT: è®¢å•è½¬å‡ºï¼ˆå•ç¬”ç»“ç®—ï¼‰
- ROUND_OUT: è½®æ¬¡åˆå¹¶è½¬å‡º
- MANUAL_IN: æ‰‹åŠ¨è½¬å…¥
- MANUAL_OUT: æ‰‹åŠ¨è½¬å‡º
```

### 3. è½¬è´¦ç±»å‹æšä¸¾
```java
public static class TransferType {
    public static final String ORDER_IN = "ORDER_IN";      // è®¢å•è½¬å…¥
    public static final String ORDER_OUT = "ORDER_OUT";    // è®¢å•è½¬å‡ºï¼ˆå•ç¬”ç»“ç®—ï¼‰
    public static final String ROUND_OUT = "ROUND_OUT";    // è½®æ¬¡åˆå¹¶è½¬å‡º
    public static final String MANUAL_IN = "MANUAL_IN";    // æ‰‹åŠ¨è½¬å…¥
    public static final String MANUAL_OUT = "MANUAL_OUT";  // æ‰‹åŠ¨è½¬å‡º
}
```

## æŠ€æœ¯å®ç°è¦ç‚¹

### 1. è½¬è´¦ç±»å‹åˆ¤æ–­
```java
// æ ¹æ®ä¸šåŠ¡åœºæ™¯è®¾ç½®ä¸åŒçš„transfer_type
if (orderId != null) {
    transferType = direction.equals("IN") ? TransferType.ORDER_IN : TransferType.ORDER_OUT;
} else if (roundId != null) {
    transferType = TransferType.ROUND_OUT;
} else {
    transferType = direction.equals("IN") ? TransferType.MANUAL_IN : TransferType.MANUAL_OUT;
}
```

### 2. åˆå¹¶è½¬å‡ºå®ç°
```java
@Transactional
private void executeRoundMergedTransferOut(Long userId, String accountType, 
                                         BigDecimal totalAmount, BigDecimal netProfit, Long roundId) {
    BigDecimal finalAmount = totalAmount.add(netProfit);
    
    if (finalAmount.compareTo(BigDecimal.ZERO) <= 0) {
        userRoundMapper.updateTransferStatus(userId, roundId, accountType, UserRoundStatus.SKIPPED);
        return;
    }
    
    // æ›´æ–°çŠ¶æ€ä¸ºTRANSFERRED
    userRoundMapper.updateTransferStatus(userId, roundId, accountType, UserRoundStatus.TRANSFERRED);
    
    // è°ƒç”¨è½¬è´¦APIï¼ˆåˆ›å»ºbtse_transfer_logè®°å½•ï¼‰
    var result = btseTransferRpcClient.transferToBtseWithRound(userId, accountType, finalAmount, 
                                                              "è½®æ¬¡åˆå¹¶è½¬å‡º", roundId);
    
    if (!result.isSuccess()) {
        // å¤±è´¥å›æ»šçŠ¶æ€
        userRoundMapper.updateTransferStatus(userId, roundId, accountType, UserRoundStatus.TRANSFER_FAILED);
    }
    // æˆåŠŸçš„æœ€ç»ˆçŠ¶æ€ç”±è¡¥å¿æœºåˆ¶æ›´æ–°
}
```

### 3. è¡¥å¿æœºåˆ¶å¢å¼º
```java
// è¡¥å¿æ—¶æ ¹æ®transfer_typeå›å†™user_roundçŠ¶æ€
private void updateUserRoundStatusAfterTransfer(BtseTransferLog transferLog, String status) {
    if (TransferType.ROUND_OUT.equals(transferLog.getTransferType())) {
        userRoundRpcClient.updateTransferStatus(
            transferLog.getUserId(),
            transferLog.getReferId(),  // roundId
            AccountType.REAL,
            status  // TRANSFER_SUCCESS/TRANSFER_FAILED
        );
    }
}
```

### 4. å…³è”æŸ¥è¯¢
```java
// é€šè¿‡btse_transfer_logæŸ¥è¯¢è½®æ¬¡è½¬è´¦çŠ¶æ€
SELECT * FROM btse_transfer_log 
WHERE user_id = ? AND refer_id = ? AND transfer_type = 'ROUND_OUT'
ORDER BY create_time DESC LIMIT 1;

// é€šè¿‡user_roundæŸ¥è¯¢è½¬è´¦çŠ¶æ€
SELECT status FROM user_round 
WHERE user_id = ? AND round_id = ? AND account_type = 'REAL';
```

## ä¼˜åŠ¿åˆ†æ

### 1. æ€§èƒ½ä¼˜åŠ¿
- **å‡å°‘APIè°ƒç”¨**ï¼šä¸€ä¸ªè½®æ¬¡å¤šä¸ªè®¢å•åˆå¹¶ä¸ºä¸€æ¬¡è½¬å‡º
- **é™ä½å»¶è¿Ÿ**ï¼šç»“ç®—æµç¨‹æ›´å¿«ï¼Œè½¬å‡ºå¼‚æ­¥è¿›è¡Œ
- **çŠ¶æ€ç®¡ç†**ï¼šuser_roundè¡¨æä¾›å¿«é€ŸçŠ¶æ€æŸ¥è¯¢

### 2. æˆæœ¬ä¼˜åŠ¿  
- **æ‰‹ç»­è´¹èŠ‚çœ**ï¼šå‡å°‘è½¬å‡ºæ¬¡æ•°ï¼Œé™ä½æ‰‹ç»­è´¹æˆæœ¬
- **æ—¥å¿—ç²¾ç®€**ï¼šæ¯è½®æ¬¡æ¯ç”¨æˆ·ä¸€æ¡è®°å½•ï¼Œä¾¿äºå®¡è®¡
- **å­˜å‚¨ä¼˜åŒ–**ï¼šé¿å…å†—ä½™å¤–é”®ï¼Œé€šè¿‡ä¸šåŠ¡é€»è¾‘å…³è”

### 3. æ•°æ®ä¸€è‡´æ€§
- **äº‹åŠ¡ä¿è¯**ï¼šuser_roundçŠ¶æ€æ›´æ–°ä¸btse_transfer_logåˆ›å»ºåœ¨åŒä¸€äº‹åŠ¡
- **è¡¥å¿æœºåˆ¶**ï¼šè·¨æœåŠ¡çŠ¶æ€åŒæ­¥ï¼Œç¡®ä¿æœ€ç»ˆä¸€è‡´æ€§
- **çŠ¶æ€è¿½è¸ª**ï¼šå®Œæ•´çš„çŠ¶æ€æµè½¬è®°å½•

### 4. å¯ç»´æŠ¤æ€§
- **æ¸…æ™°çš„ç±»å‹åˆ†ç±»**ï¼šORDER_IN/ORDER_OUT/ROUND_OUT/MANUAL_IN/MANUAL_OUT
- **ä¸šåŠ¡é€»è¾‘å…³è”**ï¼šé€šè¿‡refer_id + transfer_typeæŸ¥è¯¢å…³è”è®°å½•
- **çŠ¶æ€å¯è§†åŒ–**ï¼šuser_round.statusç›´æ¥åæ˜ è½¬è´¦è¿›åº¦

## é£é™©æ§åˆ¶

### 1. å¼‚å¸¸å¤„ç†
- è½¬å‡ºå¤±è´¥ä¸å½±å“è®¢å•ç»“ç®—
- user_roundçŠ¶æ€å›æ»šæœºåˆ¶
- è¯¦ç»†çš„é”™è¯¯æ—¥å¿—å’Œç›‘æ§

### 2. è·¨æœåŠ¡ä¸€è‡´æ€§
- RPCè°ƒç”¨å¤±è´¥çš„é‡è¯•æœºåˆ¶
- è¡¥å¿å®šæ—¶ä»»åŠ¡å›å†™çŠ¶æ€
- å¹‚ç­‰æ€§ä¿è¯

### 3. æ•°æ®å®¡è®¡
- btse_transfer_logå®Œæ•´è®°å½•æ‰€æœ‰è½¬è´¦
- user_roundçŠ¶æ€å˜æ›´å¯è¿½è¸ª
- æ”¯æŒç®¡ç†åå°æŸ¥è¯¢å’Œå¤„ç†

## å®æ–½å®Œæˆæƒ…å†µ

âœ… **å·²å®Œæˆ**ï¼š
1. æ–°å¢UserRoundStatusçŠ¶æ€å¸¸é‡å®šä¹‰
2. å®Œå–„TransferTypeç±»å‹åˆ†ç±»ï¼ˆæ–°å¢ORDER_OUTï¼‰
3. å®ç°è½®æ¬¡åˆå¹¶è½¬å‡ºé€»è¾‘å’Œäº‹åŠ¡ç®¡ç†
4. å»ºç«‹è·¨æœåŠ¡RPCçŠ¶æ€åŒæ­¥æœºåˆ¶
5. æ›´æ–°è¡¥å¿æœºåˆ¶æ”¯æŒçŠ¶æ€å›å†™
6. ç®€åŒ–æ•°æ®å…³è”ï¼ˆç§»é™¤å†—ä½™transfer_idå­—æ®µï¼‰

ğŸ”„ **å¾…æµ‹è¯•**ï¼š
1. å®Œæ•´ä¸šåŠ¡æµç¨‹æµ‹è¯•
2. è¡¥å¿æœºåˆ¶éªŒè¯
3. çŠ¶æ€ä¸€è‡´æ€§æ£€æŸ¥